(()=>{var e={463:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingUtil=void 0;const r=n(2906),i=n(5944),s=n(3177),o=n(8934),a=["─","│","─","│","┌","┐","┘","└"],l="CocHelperNormalFloat",u="CocHelperNormalFloatBorder";t.FloatingUtil=class{constructor(e){this.srcId=e}async createContext(e){var t,n;return null!==(t=e.context)&&void 0!==t?t:{lines:r.workspace.env.lines,columns:r.workspace.env.columns-r.workspace.env.cmdheight-1,globalCursorPosition:await i.utilModule.globalCursorPosition.call(),title:e.title?{text:e.title,width:await(0,o.displayWidth)(e.title)}:{text:"",width:0},borderEnabled:!!e.border,border:this.extendEdges(null===(n=e.border)||void 0===n?void 0:n.map((e=>"boolean"==typeof e?1:e))),paddingEnabled:!!e.padding,padding:this.extendEdges(e.padding)}}getCenterPos(e,t){const[,,n,r]=t;return[Math.floor((e.lines-r)/2),Math.floor((e.columns-n)/2)]}getPosForAround(e,t,n,r=!1){const i=e.columns,s=e.lines-1,[o,a]=t;let[l,u]=n;return r?l-a<0?l+=1:l-=a:l+a>=s?l-=a:l+=1,u+o>=i&&(u-=o-1),[l,u]}extendEdges(e){var t,n,r,i;if(!e)return[0,0,0,0];const s=null!==(t=e[0])&&void 0!==t?t:1,o=null!==(n=e[1])&&void 0!==n?n:s;return[s,o,null!==(r=e[2])&&void 0!==r?r:s,null!==(i=e[3])&&void 0!==i?i:o]}changeBoxByEdgesList(e,t){let n=[...e];for(const e of t)n=this.changeBoxByEdges(n,e);return n}changeBoxByEdges(e,t){if(!t)return e;const[n,r,i,s]=t;let[o,a,l,u]=e;return o-=n,a-=s,l+=s+r,u+=n+i,[o,a,l,u]}getBoxSizes(e,t,n){var r,i;const[s,o]=[null!==(r=t.top)&&void 0!==r?r:0,null!==(i=t.left)&&void 0!==i?i:0],a=[0,0,Math.max(t.width,e.title.width),t.height],l=this.changeBoxByEdges(a,e.padding),u=this.changeBoxByEdges(l,e.border);let c;if("center"===t.relative)c=this.getCenterPos(e,u);else{const r=!n&&this.storeCursorPosition?this.storeCursorPosition:e.globalCursorPosition;c="cursor"===t.relative?r:"cursor-around"===t.relative?this.getPosForAround(e,[u[2],u[3]],r):[s,o],this.storeCursorPosition=r}return[u[0],u[1]]=[c[0],c[1]],[l[0],l[1]]=[u[0]+e.border[0],u[1]+e.border[3]],[a[0],a[1]]=[l[0]+e.padding[0],l[1]+e.padding[3]],{contentBox:a,paddingBox:l,borderBox:u}}vimWinConfig(e,t,n){var r,i,s,o,c,h,d,f;const[p,m,v,g]=[null!==(r=t.top)&&void 0!==r?r:0,null!==(i=t.left)&&void 0!==i?i:0,t.width,t.height],w={line:0,col:0,zindex:null!==(s=t.borderOnly)&&void 0!==s&&s?1:100,minwidth:v,minheight:g,maxwidth:v,maxheight:g};if("center"===t.relative)w.pos="center";else{const r=!n&&this.storeCursorPosition?this.storeCursorPosition:e.globalCursorPosition;if("cursor"===t.relative)[w.line,w.col]=r;else if("cursor-around"===t.relative){const t=this.changeBoxByEdgesList([p,m,v,g],[e.padding,e.border]);[w.line,w.col]=this.getPosForAround(e,[t[2],t[3]],r)}else[w.line,w.col]=[p,m];this.storeCursorPosition=r,w.line+=1,w.col+=1}const b=null!==(o=t.topOffset)&&void 0!==o?o:0,y=null!==(c=t.leftOffset)&&void 0!==c?c:0;return w.line+=b,w.col+=y,t.maxWidth&&(w.maxwidth=t.maxWidth),t.maxHeight&&(w.maxheight=t.maxHeight),w.highlight=null!==(h=t.winHl)&&void 0!==h?h:l,t.padding&&(w.padding=t.padding),e.borderEnabled&&(w.border=e.border,w.border[0]&&(e.title.width&&(w.title=e.title.text),w.close="button"),w.borderchars=null!==(d=t.borderChars)&&void 0!==d?d:a,w.borderhighlight=[null!==(f=t.borderWinHl)&&void 0!==f?f:u]),w}nvimWinConfig(e,t,n){var r,i,s;const{contentBox:o,borderBox:a}=this.getBoxSizes(e,t,n),l=null!==(r=t.topOffset)&&void 0!==r?r:0,u=null!==(i=t.leftOffset)&&void 0!==i?i:0,c={relative:"editor",row:o[0]+l,col:o[1]+u,width:o[2],height:o[3],focusable:null===(s=t.focusable)||void 0===s||s};let h;return a&&(h={relative:"editor",row:a[0]+l,col:a[1]+u,width:a[2],height:a[3],focusable:!1}),[c,h]}winConfig(e,t,n=!0){return r.workspace.isVim?[this.vimWinConfig(e,t,n),void 0]:this.nvimWinConfig(e,t,n)}getRenderBorderData(e,t,n){var r,i,s,o,l,c;const h=null!==(i=null===(r=e.title)||void 0===r?void 0:r.text)&&void 0!==i?i:"",d=null!==(o=null===(s=e.title)||void 0===s?void 0:s.width)&&void 0!==o?o:0;if(!e.borderEnabled)return;const[f,p,m,v]=e.border;let[g,w,b,y,E,$,_,x]=null!==(l=t.borderChars)&&void 0!==l?l:a;f||(g=""),p||(w=""),m||(b=""),v||(y=""),f&&v||(E=""),f&&p||($=""),m&&v||(x=""),m&&p||(_="");const N=n[0],I=n[1],O=N-v-p,C=I-f-m,R=[];f&&R.push(E+h+g.repeat(O-d)+$),R.push(...Array.from({length:C},(()=>y+" ".repeat(O)+w))),m&&R.push(x+b.repeat(O)+_);const L=[],S=null!==(c=t.borderWinHl)&&void 0!==c?c:u;if(S){L.push({hlGroup:S,line:0,colStart:0,colEnd:N});for(let e=0,t=C;e<t;e++)v&&L.push({hlGroup:S,line:e+1,colStart:0,colEnd:v}),p&&L.push({hlGroup:S,line:e+1,colStart:v+O,colEnd:N});m&&L.push({hlGroup:S,line:I-1,colStart:0,colEnd:N})}return{lines:R,highlights:L}}renderBorderNotifier(e,t,n,r){const i=this.getRenderBorderData(t,n,"width"in r?[r.width,r.height]:[r.minwidth,r.minheight]);if(!i)return s.Notifier.noop();const{lines:o,highlights:a}=i;return s.Notifier.create((()=>{e.setOption("modifiable",!0,!0),e.setOption("readonly",!1,!0),e.setLines(o,{start:0,end:-1},!0),e.setOption("modifiable",!1,!0),e.setOption("readonly",!0,!0),this.addHighlightsNotify(e,a)}))}nvimWinHl(e){var t,n;if(r.workspace.isVim)return"";const i=[];return i.push(`Normal:${null!==(t=e.winHl)&&void 0!==t?t:l}`),i.push(`NormalNC:${null!==(n=e.winHlNC)&&void 0!==n?n:"CocHelperNormalFloatNC"}`),i.join(",")}addHighlightsNotify(e,t){for(const n of t)n.hlGroup&&void 0!==n.line&&void 0!==n.colStart&&void 0!==n.colEnd&&e.highlightRanges(this.srcId,n.hlGroup,[r.Range.create(n.line,n.colStart,n.line,n.colEnd)])}}},1526:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingWindow=void 0;const r=n(2906),i=n(3177),s=n(8434),o=n(5944),a=n(8934),l=n(463);class u{constructor(e,t,n,i,s){this.bufnr=e,this.borderBufnr=t,this.createOptions=n,this.mode=i,this.util=s,this.nvim=r.workspace.nvim,this.disposables=[],this.nvim=r.workspace.nvim,this.buffer=this.nvim.createBuffer(e),t&&(this.borderBuffer=r.workspace.nvim.createBuffer(t),this.disposables.push(r.events.on("BufWinLeave",a.helperLogger.asyncCatch((async e=>{this.borderBufnr&&e===this.bufnr&&await o.utilModule.closeWinByBufnr.call([this.borderBufnr])})))))}static getInitedExecute(e,t){var n,r,i,s;let o=null!==(r=null===(n=t.initedExecute)||void 0===n?void 0:n.call(t,u.initedContextVars.create))&&void 0!==r?r:"";return o=`${u.modePresets[e].createInitedExecute(u.initedContextVars.create)}\n${o}`,[o,null!==(s=null===(i=t.borderInitedExecute)||void 0===i?void 0:i.call(t,u.initedContextVars.create))&&void 0!==s?s:u.modePresets.show.createInitedExecute(u.initedContextVars.create)]}static async create(e={}){var t,n,r;const i=null!==(t=e.mode)&&void 0!==t?t:"default",[o,a]=this.getInitedExecute(i,e),[c,h]=await s.floatingModule.create.call(null!==(n=e.name)&&void 0!==n?n:"",o,null===(r=e.hasBorderBuf)||void 0===r||r,a),d=new l.FloatingUtil(this.srcId);return new u(c,null!=h?h:void 0,e,i,d)}getInitedExecute(e){var t,n,r,i;let s=null!==(n=null===(t=e.initedExecute)||void 0===t?void 0:t.call(e,u.initedContextVars.open))&&void 0!==n?n:"";return s=`${u.modePresets[this.mode].openInitedExecute(u.initedContextVars.open)}\n${s}`,[s,null!==(i=null===(r=e.borderInitedExecute)||void 0===r?void 0:r.call(e,u.initedContextVars.open))&&void 0!==i?i:u.modePresets.show.openInitedExecute(u.initedContextVars.open)]}getFocus(e){var t,n;return null!==(n=null!==(t=e.focus)&&void 0!==t?t:this.mode?u.modePresets[this.mode].focus:void 0)&&void 0!==n&&n}getModifiable(e){var t,n;return null!==(n=null!==(t=e.modifiable)&&void 0!==t?t:this.mode?u.modePresets[this.mode].modifiable:void 0)&&void 0!==n&&n}setLinesNotifier(e){return i.Notifier.create((()=>{if(!e.lines&&!e.modifiable)return;const t=this.getModifiable(e);if(this.buffer.setOption("modifiable",!0,!0),this.buffer.setOption("readonly",!1,!0),e.lines&&this.buffer.setLines(e.lines,{start:0,end:-1},!0),t||(this.buffer.setOption("modifiable",!1,!0),this.buffer.setOption("readonly",!0,!0)),e.highlights)for(const t of e.highlights)this.util.addHighlightsNotify(this.buffer,[t]);r.workspace.isVim&&this.nvim.command("redraw!",!0)}))}async setLines(e){await this.setLinesNotifier(e).run()}async opened(){return!!await this.win()}async openNotifier(e){var t;if(e.width<=0||e.height<=0)return i.Notifier.noop();const n=[];n.push(this.closeNotifier());const o=await this.util.createContext(e),[a,l]=this.getInitedExecute(e),[u,c]=this.util.winConfig(o,e);return e.borderOnly&&c?(n.push(s.floatingModule.open.callNotifier(this.bufnr,c,l,null,null,"",!1,this.util.nvimWinHl(e))),n.push(this.util.renderBorderNotifier(this.buffer,o,e,c))):n.push(s.floatingModule.open.callNotifier(this.bufnr,u,a,null!==(t=this.borderBufnr)&&void 0!==t?t:null,null!=c?c:null,l,this.getFocus(e),this.util.nvimWinHl(e))),r.workspace.isNvim&&this.borderBuffer&&c&&n.push(this.util.renderBorderNotifier(this.borderBuffer,o,e,c)),n.push(this.setLinesNotifier(e),i.Notifier.create((()=>{e.filetype&&this.buffer.setOption("filetype",e.filetype,!0)}))),i.Notifier.combine(n)}async open(e){await(await this.openNotifier(e)).run()}async resumeNotifier(e){const t=await this.util.createContext(e),[n,o]=this.util.winConfig(t,e);return i.Notifier.create((()=>{var i;s.floatingModule.resume.callNotify(this.bufnr,n,null!==(i=this.borderBufnr)&&void 0!==i?i:null,null!=o?o:null,this.getFocus(e),this.util.nvimWinHl(e)),this.borderBuffer&&o&&this.util.renderBorderNotifier(this.borderBuffer,t,e,o).notify(),r.workspace.isVim&&this.nvim.command("redraw!",!0)}))}async resume(e){await(await this.resumeNotifier(e)).run()}async resizeNotifier(e){var t;const n=await this.util.createContext(e),[o,a]=this.util.winConfig(n,e,!1),l=[];return e.borderOnly&&a?(l.push(s.floatingModule.update.callNotifier(this.bufnr,a,null,null,this.util.nvimWinHl(e))),l.push(this.util.renderBorderNotifier(this.buffer,n,e,a))):l.push(s.floatingModule.update.callNotifier(this.bufnr,o,null!==(t=this.borderBufnr)&&void 0!==t?t:null,null!=a?a:null,this.util.nvimWinHl(e))),r.workspace.isNvim&&this.borderBuffer&&a&&l.push(this.util.renderBorderNotifier(this.borderBuffer,n,e,a)),l.push(i.Notifier.create((()=>{r.workspace.isVim&&this.nvim.command("redraw!",!0)}))),i.Notifier.combine(l)}async resize(e){await(await this.resizeNotifier(e)).run()}async win(){const e=await s.floatingModule.winid.call(this.bufnr);return e?this.nvim.createWindow(e):void 0}async borderWin(){const e=await s.floatingModule.winid.call(this.bufnr);return e?this.nvim.createWindow(e):void 0}closeNotifier(){return s.floatingModule.close.callNotifier(this.bufnr)}async close(){await this.closeNotifier().run()}dispose(){(0,r.disposeAll)(this.disposables),this.disposables.forEach((e=>e.dispose()))}}t.FloatingWindow=u,u.modePresets={default:{modifiable:!1,focus:!1,createInitedExecute:()=>"",openInitedExecute:()=>""},base:{createInitedExecute:e=>`\n        call setbufvar(${e.bufnr}, '&buftype', 'nofile')\n        call setbufvar(${e.bufnr}, '&bufhidden', 'hide')\n        call setbufvar(${e.bufnr}, '&buflisted', 0)\n\n        call setbufvar(${e.bufnr}, '&wrap', 1)\n\n        call setbufvar(${e.bufnr}, '&swapfile', 0)\n\n        call setbufvar(${e.bufnr}, '&modeline', 0)\n      `,openInitedExecute:e=>`\n        call setbufvar(${e.bufnr}, '&list', 0)\n\n        call setbufvar(${e.bufnr}, '&listchars', '')\n        if has('nvim')\n          call setbufvar(${e.bufnr}, '&fillchars', 'eob: ')\n        endif\n\n        call setbufvar(${e.bufnr}, '&signcolumn', 'no')\n        call setbufvar(${e.bufnr}, '&number', 0)\n        call setbufvar(${e.bufnr}, '&relativenumber', 0)\n        call setbufvar(${e.bufnr}, '&foldenable', 0)\n        call setbufvar(${e.bufnr}, '&foldcolumn', 0)\n\n        call setbufvar(${e.bufnr}, '&spell', 0)\n\n        call setbufvar(${e.bufnr}, '&cursorcolumn', 0)\n        call setbufvar(${e.bufnr}, '&cursorline', 0)\n        call setbufvar(${e.bufnr}, '&colorcolumn', '')\n      `},show:{modifiable:!1,createInitedExecute:e=>`\n        ${u.modePresets.base.createInitedExecute(e)}\n        " call setbufvar(${e.bufnr}, '&undofile', 0)\n        " call setbufvar(${e.bufnr}, '&undolevels', -1)\n\n        call setbufvar(${e.bufnr}, '&modifiable', 0)\n        call setbufvar(${e.bufnr}, '&modified', 0)\n        call setbufvar(${e.bufnr}, '&readonly', 1)\n      `,openInitedExecute:e=>`\n        ${u.modePresets.base.openInitedExecute(e)}\n      `}},u.initedContextVars={create:{bufnr:"a:ctx.bufnr"},open:{bufnr:"a:ctx.bufnr",winid:"a:ctx.winid"}},u.srcId="coc-helper-floatwin"},4356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiFloatingWindow=void 0;const r=n(2906),i=n(8303),s=n(463),o=n(1526);class a{constructor(e,t,n){this.borderFloatWin=e,this.floatWinDict=t,this.util=n,this.disposables=[],this.floatWins=Object.values(this.floatWinDict),this.nvim=r.workspace.nvim,this.bufnrs=[e.bufnr,...this.floatWins.map((e=>e.bufnr))],this.disposables.push(r.events.on("BufWinLeave",(async e=>{this.bufnrs.includes(e)&&await this.close()})),r.Disposable.create((()=>{e.dispose(),(0,r.disposeAll)(this.floatWins)})))}static async create(e){const t=await o.FloatingWindow.create(Object.assign({hasBorderBuf:!1,mode:"show"},e)),n=(await Promise.all(Object.entries(e.wins).map((async([e,t])=>[e,await o.FloatingWindow.create(Object.assign({hasBorderBuf:!1},t))])))).reduce(((e,[t,n])=>(e[t]=n,e)),{}),r=new s.FloatingUtil(o.FloatingWindow.srcId);return new a(t,n,r)}async opened(){return this.borderFloatWin.opened()}async sizeByWinsOptions(e){var t,n;let r=0,i=0;for(const s of e){const e=await this.util.createContext(s),o=this.util.getBoxSizes(e,s,!1),a=(null!==(t=s.left)&&void 0!==t?t:0)+o.borderBox[2];a>r&&(r=a);const l=(null!==(n=s.top)&&void 0!==n?n:0)+o.borderBox[3];l>i&&(i=l)}return[r,i]}async batchAction(e,t,{reverse:n=!1,updateCursorPosition:r=!0}={}){var s,o;const[a,l]=await this.sizeByWinsOptions(Object.values(t.wins)),u=Object.assign({width:a,height:l},t),c=await this.util.createContext(u),{contentBox:h}=this.util.getBoxSizes(c,u,r),d=[];for(const[n,r]of Object.entries(this.floatWinDict)){const i=t.wins[n];i&&d.push(await r[e](Object.assign(Object.assign({},i),{relative:"editor",top:h[0]+(null!==(s=i.top)&&void 0!==s?s:0),left:h[1]+(null!==(o=i.left)&&void 0!==o?o:0)})))}d.push(await this.borderFloatWin[e](Object.assign(Object.assign({},u),{borderOnly:!0}))),n&&d.reverse(),await i.Notifier.runAll(d)}async open(e){return this.batchAction("openNotifier",e)}async resume(e){return this.batchAction("resumeNotifier",e)}resize(e){return this.batchAction("resizeNotifier",e,{updateCursorPosition:!1})}async win(){return{borderWin:await this.borderFloatWin.win(),wins:await this.wins()}}async wins(){return await Promise.all(this.floatWins.map((e=>e.win())))}async close(){const e=[];e.push(this.borderFloatWin.closeNotifier()),e.push(...this.floatWins.map((e=>e.closeNotifier()))),await i.Notifier.runAll(e)}dispose(){(0,r.disposeAll)(this.disposables)}}t.MultiFloatingWindow=a},5764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VimModule=void 0;const r=n(2906),i=n(3177),s=n(8934),o=n(8951),a=(0,o.getModuleId)("VimModule"),l=`g:coc_helper_module_m${a}_v${s.versionName}`,u=`CocHelperCallFn_m${a}_v${s.versionName}`,c=`CocHelperCallVar_m${a}_v${s.versionName}`;function h(e){return e.replace(/\n\s*\\/g,"")}class d{constructor(e){this.moduleKey=e}static async init(e){this.inited=!0,await r.workspace.nvim.call("execute",`\n        if !exists('${l}')\n          let ${l} = {}\n        endif\n\n        function! ${u}(module_key, method_name, args)\n          try\n            return call(${l}[a:module_key][a:method_name], a:args)\n          catch\n            let ex = v:exception\n            let msg = printf('error when call %s.%s.%s, args: [%s]', '${l}', a:module_key, a:method_name, join(a:args, ','))\n            echom msg\n            echom ex\n            throw msg . ' ' . ex\n          endtry\n        endfunction\n\n        function! ${c}(module_key, var_name, expression)\n          try\n            let ${l}[a:module_key][a:var_name] = eval(a:expression)\n          catch\n            let ex = v:exception\n            let msg = printf('error when declare %s.%s.%s, expression: %s', '${l}', a:module_key, a:var_name, a:expression)\n            echom msg\n            echom ex\n            throw msg . ' ' . ex\n          endtry\n        endfunction\n      `);const t=[...this.initQueue];for(;t.length;){const n=t.shift();try{await n.fn(e)}catch(e){s.helperLogger.error(e)}this.initAfterQueue.length&&(t.push(...this.initAfterQueue),this.initAfterQueue=[])}}static registerInit(e,t){this.inited?this.initAfterQueue.push({description:e,fn:t}):this.initQueue.push({description:e,fn:t})}static create(e,t){const n=`${(0,o.getModuleId)("VimModule.module")}_${e}`,i=new d(n);let s;function a(){return s||(s=t(i)),s}return d.registerInit(`module ${n}`,(async()=>{await r.workspace.nvim.call("execute",`\n          if !exists('${l}.${n}')\n            let ${l}.${n} = {}\n          endif\n        `),a()})),new Proxy({},{get:(e,t)=>Reflect.get(a(),t),has:(e,t)=>t in a(),ownKeys:()=>Object.keys(a())})}registerInit(e,t){return"string"==typeof e?d.registerInit(e,t):this.registerInit("",e)}fn(e,t){const{nvim:n}=r.workspace,o=`${l}.${this.moduleKey}.${e}`,a=t({name:o});return this.registerInit(`fn ${o}`,(async()=>{s.helperLogger.debug(`declare fn ${o}`),await n.call("execute",[h(a)])})),{name:o,inlineCall:(t="")=>`${u}('${this.moduleKey}', '${e}', [${t}])`,call:(...t)=>(s.helperLogger.debug(`call ${o}`),n.call(u,[this.moduleKey,e,t])),callNotify:(...t)=>(s.helperLogger.debug(`callNotify ${o}`),n.call(u,[this.moduleKey,e,t],!0)),callNotifier:(...t)=>(s.helperLogger.debug(`callNotifier ${o}`),i.Notifier.create((()=>{n.call(u,[this.moduleKey,e,t],!0)})))}}var(e,t){const{nvim:n}=r.workspace,o=`${l}.${this.moduleKey}.${e}`;return this.registerInit(`var ${o}`,(async()=>{s.helperLogger.debug(`declare var ${o}`),await n.call(c,[this.moduleKey,e,h(t)])})),{name:o,inline:o,get:()=>n.eval(o),set:async t=>{await n.call(c,[this.moduleKey,e,h(t)])},setNotify:t=>{n.call(c,[this.moduleKey,e,h(t)],!0)},setNotifier:t=>i.Notifier.create((()=>{n.call(c,[this.moduleKey,e,h(t)],!0)}))}}}t.VimModule=d,d.inited=!1,d.initQueue=[],d.initAfterQueue=[]},3987:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WinLayoutFinder=void 0;const r=n(2906);t.WinLayoutFinder=class{constructor(e){this.root=e}static convertVimLayoutNode(e,t){if("leaf"===e[0])return{type:e[0],winid:e[1],parent:t};{const t={type:e[0],children:[]};return t.children=e[1].map(((e,n)=>this.convertVimLayoutNode(e,{group:t,indexInParent:n}))),t}}static async create(){const e=await r.workspace.nvim.call("winlayout",[]);return new this(this.convertVimLayoutNode(e))}static getFirstLeafWinid(e){return"leaf"===e.type?e.winid:this.getFirstLeafWinid(e.children[0])}findWinid(e,t=this.root){if("leaf"===t.type){if(t.winid===e)return t}else for(const n of t.children){const t=this.findWinid(e,n);if(t)return t}}findClosest(e,t){const n=new Set([e]),r=[e];for(;r.length;){const e=r.shift();if("leaf"===e.type){if(t.includes(e.winid))return e}else for(const t of e.children)n.has(t)||(r.push(t),n.add(t));e.parent&&!n.has(e.parent.group)&&(r.push(e.parent.group),n.add(e.parent.group))}}}},7558:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventsModule=t.helperEvents=t.helperVimEvents=t.HelperVimEvents=t.HelperEventEmitter=void 0;const r=n(2906),i=n(5944),s=n(8934),o=n(8951),a=n(5764),l=`m${(0,o.getModuleId)("events")}_v${s.versionName}`;class u{constructor(e,t=!1){this.helperLogger=e,this.concurrent=t,this.listenersMap=new Map}listeners(e){if(!this.listenersMap.has(e)){const t=[];return this.listenersMap.set(e,t),t}return this.listenersMap.get(e)}once(e,t,n){this.listeners(e).push((async(...e)=>{const n=await t(...e);return i.dispose(),n}));const i=r.Disposable.create((()=>this.off(e,t)));return n&&n.push(i),i}on(e,t,n){this.listeners(e).push(t);const i=r.Disposable.create((()=>this.off(e,t)));return n&&n.push(i),i}off(e,t){"function"==typeof t.cancel&&t.cancel();const n=this.listeners(e),r=n.indexOf(t);-1!==r&&n.splice(r,1)}async fire(e,...t){if(this.concurrent)await Promise.all(this.listeners(e).map((async e=>{try{await e(...t)}catch(e){this.helperLogger.error(e)}})));else for(const n of this.listeners(e))try{await n(...t)}catch(e){this.helperLogger.error(e)}}}t.HelperEventEmitter=u;class c{constructor(e,t,n={}){var r;this.vimEvents=e,this.helperLogger=t,this.options=n,this.id=(0,o.getModuleId)("events.id"),this.augroupName=`CocHelperInternal_${l}_${n.name?`${n.name}_`:""}${this.id}`,this.commandName=`coc-helper.internal.didVimEvent_${l}_${n.name?`${n.name}_`:""}${this.id}`,this.events=new u(this.helperLogger,null!==(r=n.concurrent)&&void 0!==r&&r)}async register(e){await t.eventsModule.activate.call(this.augroupName,this.commandName,Object.entries(this.vimEvents).map((([e,t])=>Object.assign({event:e},t)))),e.subscriptions.push(r.Disposable.create((()=>{t.eventsModule.deactivate.call(this.augroupName).catch(this.helperLogger.error)}))),e.subscriptions.push(r.commands.registerCommand(this.commandName,s.helperLogger.asyncCatch(((e,...t)=>this.events.fire(e,...t))),void 0,!0))}}t.HelperVimEvents=c,t.helperVimEvents=new c({BufDelete:{eventExpr:"BufDelete *",argExprs:["+expand('<abuf>')"]},BufWipeout:{eventExpr:"BufWipeout *",argExprs:["+expand('<abuf>')"]}},s.helperLogger,{name:"coc_helper"}),t.helperEvents=t.helperVimEvents.events,t.eventsModule=a.VimModule.create("events",(e=>{const t=e.fn("activate",(({name:e})=>`\n      function! ${e}(augroup_name, autocmd_events) abort\n        execute 'augroup ' . a:augroup_name\n          autocmd!\n          for autocmd_event in a:autocmd_events\n            execute autocmd_event\n          endfor\n        augroup END\n      endfunction\n    `));function n(e,t){return t.map((t=>{var n;const r=`${[`'${e}'`,`'${t.event}'`,...null!==(n=t.argExprs)&&void 0!==n?n:[]].join(", ")}`;return`autocmd ${t.eventExpr} call ${!1===t.async?i.utilModule.runCocCmd.inlineCall(r):i.utilModule.runCocCmdAsync.inlineCall(r)}`}))}return{activate:{call:(e,r,i)=>t.call(e,n(r,i)),callNotify:(e,r,i)=>t.callNotify(e,n(r,i)),callNotifier:(e,r,i)=>t.callNotifier(e,n(r,i))},deactivate:e.fn("deactivate",(({name:e})=>`\n        function! ${e}(augroup_name) abort\n          execute 'augroup ' . a:augroup_name\n            autocmd!\n          augroup END\n        endfunction\n      `)),doAutocmd:e.fn("do_autocmd",(({name:e})=>`\n        function! ${e}(name) abort\n          if exists('#User#'.a:name)\n            exe 'doautocmd <nomodeline> User '.a:name\n          endif\n        endfunction\n      `))}}))},8303:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=t.activateHelper=void 0;const s=n(2906),o=n(7558),a=n(1526),l=n(4356),u=n(8934),c=n(5764);async function h(e,t={}){var n,r,i;(null===(r=null!==(n=t.vimModule)&&void 0!==n?n:t.events)||void 0===r||r)&&await c.VimModule.init(e),(null===(i=t.events)||void 0===i||i)&&await o.helperVimEvents.register(e);try{await s.workspace.nvim.command("hi default link CocHelperNormalFloatNC CocHelperNormalFloat")}catch(e){s.window.showMessage(e.toString(),"error")}}i(n(7558),t),i(n(1526),t),i(n(6045),t),i(n(8434),t),i(n(5944),t),i(n(4356),t),i(n(3177),t),i(n(8934),t),i(n(5764),t),i(n(3987),t),t.activateHelper=h,t.activate=async function(e){await h(e,{events:!0}),o.helperEvents.on("BufDelete",(e=>{s.window.showMessage(`buffer delete ${e}`)})),await u.helperLogger.measureTask((async()=>{await s.workspace.nvim.command("hi CocHelperNormalFloat ctermbg=Red guibg=#aa0000"),await s.workspace.nvim.command("hi CocHelperNormalFloatNC ctermbg=Red guibg=#aa0000"),await s.workspace.nvim.command("hi CocHelperNormalFloatBorder ctermbg=Black ctermfg=Grey guibg=#0000aa guifg=#ffffff")}),"highlight commands"),await u.helperLogger.measureTask((async()=>{const e=await a.FloatingWindow.create({mode:"base"});s.commands.registerCommand("testHelper-floating",u.helperLogger.asyncCatch((async()=>{const t="hello";await e.open({relative:"cursor-around",lines:[t],top:0,left:0,title:"test",width:5,height:5,border:[1,1,1,0],padding:[],modifiable:!0,focus:!0,filetype:"test",highlights:[{line:0,srcId:0,colStart:0,colEnd:t.length,hlGroup:"Question"}]}),await(0,u.sleep)(2e3),await e.resize({relative:"cursor-around",top:0,left:0,title:"test",width:10,height:10,border:[],padding:[],winHl:"Pmenu",winHlNC:"Pmenu",modifiable:!0,focus:!1,filetype:"test"}),await(0,u.sleep)(2e3),await e.resize({relative:"cursor-around",top:0,left:0,title:"test",width:5,height:5,border:[1,1,1,0],padding:[],modifiable:!0,focus:!1,filetype:"test"})})))}),"register floatWin"),await u.helperLogger.measureTask((async()=>{const e=await l.MultiFloatingWindow.create({wins:{prompt:{mode:"show"},input:{mode:"base"}}});s.commands.registerCommand("testHelper-multi-floating",u.helperLogger.asyncCatch((async()=>{const t="input your path:",n=await(0,u.displayHeight)(10,[t]),r="/home/users/repos";let i=await(0,u.displayHeight)(10,[r]);s.events.on("TextChangedI",(async t=>{const n=e.floatWinDict.input;if(n.bufnr!==t)return;const r=await n.win();if(!r)return;const s=await r.cursor,o=await r.width,l=await r.height,c=await n.buffer.getLines(),h=await(0,u.displayHeight)(o,c,s,"i");h!==l&&(i=h,await a())}));const o=()=>({relative:"cursor-around",top:0,left:0,title:"test",border:[],padding:[],modifiable:!0,filetype:"test",wins:{prompt:{top:0,left:0,width:10,height:n,highlights:[{line:0,srcId:0,colEnd:t.length,colStart:0,hlGroup:"Question"}],lines:[t]},input:{top:n,left:0,width:10,height:i,lines:[r],focus:!0,modifiable:!0,initedExecute:()=>"\n            if has('nvim')\n              call feedkeys('A')\n            endif\n          "}}}),a=async()=>{await e.resize(o())};await e.open(o())})))}),"register multiFloatWin")}},6045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufModule=void 0;const r=n(5764),i=n(2906);t.bufModule=r.VimModule.create("buf",(e=>{const t=i.workspace.isNvim,n=e.fn("create_by_name",(({name:e})=>`\n      function! ${e}(name) abort\n        return bufadd(a:name)\n      endfunction\n    `));return{createByName:n,create:e.fn("create",(({name:e})=>t?`\n          function! ${e}(...) abort\n            let name = get(a:000, 0, '')\n            if name is ''\n              return nvim_create_buf(v:false, v:true)\n            else\n              return ${n.inlineCall("name")}\n            endif\n          endfunction\n        `:`\n          function! ${e}(...) abort\n            let name = get(a:000, 0, '')\n            return ${n.inlineCall("name")}\n          endfunction\n        `))}}))},8434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.floatingModule=void 0;const r=n(2906),i=n(5764),s=n(6045);t.floatingModule=i.VimModule.create("float",(e=>{const t=r.workspace.isNvim,n=e.fn("init_execute",(({name:e})=>`\n      function! ${e}(ctx, inited_execute) abort\n        execute a:inited_execute\n      endfunction\n    `)),i=e.fn("open_win",(({name:e})=>t?`\n        function! ${e}(bufnr, focus, win_config, win_hl, inited_execute) abort\n          noau let winid = nvim_open_win(a:bufnr, a:focus, a:win_config)\n          if !empty(a:win_hl)\n            call nvim_win_set_option(winid, 'winhl', a:win_hl)\n          endif\n          if !empty(a:inited_execute)\n            call ${n.inlineCall("{'bufnr': a:bufnr, 'winid': winid}, a:inited_execute")}\n          endif\n          return winid\n        endfunction\n      `:`\n        function! ${e}(bufnr, focus, win_config, win_hl, inited_execute) abort\n          let winid = popup_create(a:bufnr, a:win_config)\n          call ${n.inlineCall("{'bufnr': a:bufnr, 'winid': winid}, a:inited_execute")}\n\n          return winid\n        endfunction\n      `));return{create:e.fn("create",(({name:e})=>t?`\n            function! ${e}(name, inited_execute, has_border_buf, border_inited_execute) abort\n              let bufnr = ${s.bufModule.create.inlineCall("a:name")}\n              call ${n.inlineCall("{'bufnr': bufnr}, a:inited_execute")}\n\n              let border_bufnr = v:null\n              if a:has_border_buf\n                let border_bufnr = nvim_create_buf(v:false, v:true)\n                call ${n.inlineCall("{'bufnr': border_bufnr}, a:border_inited_execute")}\n              endif\n              return [bufnr, border_bufnr]\n            endfunction\n          `:`\n            function! ${e}(name, inited_execute, has_border_buf, border_inited_execute) abort\n              let bufnr = ${s.bufModule.create.inlineCall("a:name")}\n              call ${n.inlineCall("{'bufnr': bufnr}, a:inited_execute")}\n              return [bufnr, v:null]\n            endfunction\n          `)),open:e.fn("open",(({name:e})=>`\n        function! ${e}(bufnr, win_config, inited_execute, border_bufnr, border_win_config, border_inited_execute, focus, win_hl) abort\n          let winid = ${i.inlineCall("a:bufnr, a:focus, a:win_config, a:win_hl, a:inited_execute")}\n          call setbufvar(a:bufnr, 'coc_helper_winid', winid)\n\n          if a:border_bufnr\n            let border_winid = ${i.inlineCall("a:border_bufnr, v:false, a:border_win_config, a:win_hl, a:border_inited_execute")}\n            call setbufvar(a:bufnr, 'coc_helper_border_winid', border_winid)\n          endif\n        endfunction\n      `)),resume:e.fn("resume",(({name:e})=>`\n        function! ${e}(bufnr, win_config, border_bufnr, border_win_config, focus, win_hl) abort\n          let winid = ${i.inlineCall("a:bufnr, a:focus, a:win_config, a:win_hl, ''")}\n          call setbufvar(a:bufnr, 'coc_helper_winid', winid)\n\n          if a:border_bufnr\n            let border_winid = ${i.inlineCall("border_bufnr, v:false, a:border_win_config, a:win_hl, ''")}\n            call setbufvar(a:bufnr, 'coc_helper_border_winid', border_winid)\n          endif\n        endfunction\n      `)),update:e.fn("update",(({name:e})=>t?`\n          function! ${e}(bufnr, win_config, border_bufnr, border_win_config, win_hl) abort\n            let winid = getbufvar(a:bufnr, 'coc_helper_winid', v:null)\n            if !winid\n              return\n            endif\n            call nvim_win_set_config(winid, a:win_config)\n            if !empty(a:win_hl)\n              call nvim_win_set_option(winid, 'winhl', a:win_hl)\n            endif\n            if has('nvim')\n              redraw!\n            endif\n\n            if a:border_bufnr\n              let border_winid = getbufvar(a:bufnr, 'coc_helper_border_winid', v:null)\n              if border_winid\n                call nvim_win_set_config(border_winid, a:border_win_config)\n                if !empty(a:win_hl)\n                  call nvim_win_set_option(border_winid, 'winhl', a:win_hl)\n                endif\n                if has('nvim')\n                  redraw!\n                endif\n              endif\n            endif\n          endfunction\n        `:`\n          function! ${e}(bufnr, win_config, border_bufnr, border_win_config, win_hl) abort\n            let winid = getbufvar(a:bufnr, 'coc_helper_winid', v:null)\n            if !winid\n              return\n            endif\n            call popup_setoptions(winid, a:win_config)\n          endfunction\n        `)),winid:e.fn("winid",(({name:e})=>`\n        function! ${e}(bufnr) abort\n          let id = getbufvar(a:bufnr, 'coc_helper_winid', v:null)\n          let nr = win_id2win(id)\n          return nr is 0 ? v:null : id\n        endfunction\n      `)),borderWinid:e.fn("border_winid",(({name:e})=>`\n        function! ${e}(bufnr) abort\n          return getbufvar(a:bufnr, 'coc_helper_border_winid', v:null)\n        endfunction\n      `)),close:e.fn("close",(({name:e})=>t?`\n            function! ${e}(bufnr) abort\n              let winid = getbufvar(a:bufnr, 'coc_helper_winid', v:null)\n              let border_winid = getbufvar(a:bufnr, 'coc_helper_border_winid', v:null)\n              try\n                if winid\n                  call nvim_win_close(winid, v:true)\n                endif\n                if border_winid\n                  call nvim_win_close(border_winid, v:true)\n                endif\n              catch\n              endtry\n            endfunction\n          `:`\n            function! ${e}(bufnr) abort\n              let winid = getbufvar(a:bufnr, 'coc_helper_winid', v:null)\n              try\n                if winid\n                  call popup_close(winid)\n                endif\n              catch\n              endtry\n            endfunction\n          `))}}))},5944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utilModule=void 0;const r=n(5764),i=n(2906);t.utilModule=r.VimModule.create("util",(e=>{const t=i.workspace.isNvim;return{globalCursorPosition:e.fn("global_cursor_position",(({name:e})=>`\n        function! ${e}()\n          let nr = winnr()\n          let [row, col] = win_screenpos(nr)\n          return [row + winline() - 2, col + wincol() - 2]\n        endfunction\n      `)),isFloat:e.fn("is_float",(({name:e})=>t?`\n          function! ${e}(winnr) abort\n            if !exists('*nvim_win_get_config')\n              return v:false\n            endif\n            let winid = win_getid(a:winnr)\n            return nvim_win_get_config(winid)['relative'] != ''\n          endfunction\n        `:`\n          function! ${e}(winnr) abort\n            return v:false\n          endfunction\n        `)),closeWinByBufnr:e.fn("close_win_by_bufnr",(({name:e})=>`\n        if exists('*nvim_win_close')\n          function! ${e}(bufnrs) abort\n            for bufnr in a:bufnrs\n              try\n                let winid = bufwinid(bufnr)\n                if winid >= 0\n                  call nvim_win_close(winid, v:true)\n                endif\n              catch\n              endtry\n            endfor\n          endfunction\n        else\n          function! ${e}(bufnrs) abort\n            for bufnr in a:bufnrs\n              try\n                let winnr = bufwinnr(bufnr)\n                if winnr >= 0\n                  execute winnr . 'wincmd c'\n                endif\n              catch\n              endtry\n            endfor\n          endfunction\n        endif\n      `)),runCocCmd:e.fn("run_coc_cmd",(({name:e})=>`\n      function! ${e}(name, ...) abort\n        return call('CocAction', extend(['runCommand', a:name], a:000))\n      endfunction\n    `)),runCocCmdAsync:e.fn("run_coc_cmd_async",(({name:e})=>`\n      function! ${e}(name, ...) abort\n        return call('CocActionAsync', extend(['runCommand', a:name], a:000))\n      endfunction\n    `))}}))},3177:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Notifier=void 0;const r=n(2906),i=n(8934);class s{constructor(e){this.notifyFns=[],this.notifyFns.push(e)}static async run(e){if(e){if(!("then"in e))return e.run();{const t=await e;if(t)return t.run()}}}static notifyAll(e){for(const t of e)t&&t.notify()}static async runAll(e){const t=await Promise.all(e);return r.workspace.nvim.pauseNotification(),this.notifyAll(t),r.workspace.nvim.resumeNotification()}static combine(e){const t=(0,i.compactI)(e);return t.length<1?s.noop():1===t.length?t[0]:t.reduce(((e,t)=>e.concat(t)),s.noop())}static noop(){return this.create((()=>{}))}static create(e){return new s(e)}async run(){return s.runAll([this])}notify(){for(const e of this.notifyFns)e()}concat(e){return this.notifyFns.push(...e.notifyFns),this}}t.Notifier=s},3728:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sum=t.compactI=void 0,t.compactI=e=>e.filter((e=>null!=e)),t.sum=e=>e.reduce(((e,t)=>e+t))},5020:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfigLocal=void 0;const r=n(2906),i=n(9648);t.getConfigLocal=e=>(t=(0,i.generateUri)(r.workspace.cwd))=>r.workspace.getConfiguration(e,t)},6950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTest=t.isLinux=t.isMacintosh=t.isWindows=t.isWebpack=void 0,t.isWebpack="function"==typeof n,t.isWindows="win32"===process.platform,t.isMacintosh="darwin"===process.platform,t.isLinux="linux"===process.platform,t.isTest=!1},8934:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0,i(n(3728),t),i(n(5020),t),i(n(6950),t),i(n(8525),t),i(n(9648),t),i(n(6238),t),t.sleep=function(e){return new Promise((t=>{setTimeout(t,e)}))}},8525:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.prettyPrint=t.prettyObject=t.helperLogger=t.HelperLogger=void 0;const i=n(2906),s=r(n(3837)),o=n(6950),a=["trace","debug","info","warn","error","fatal","off"],l=a.indexOf("error");function u(e){return`${e.toLocaleString()} ${e.getMilliseconds().toString().padStart(3,"0")}`}class c{constructor(e){this.channelName=e,this.timeMarkers=new Map,this.levelStatus="trace",this.levelNumber=a.indexOf(this.levelStatus),this.appendLine=e=>{this.outputChannel.appendLine(e)},this.log=(e,t)=>{var n,r;const s=a[e];if(s<this.levelNumber)return;const c=`[${u(new Date)}] [${e}]: `;if(t instanceof Error)return this.appendLine(`${c}${null!==(n=t.stack)&&void 0!==n?n:t.toString()}`),i.window.showMessage(t.message,"error"),void(o.isTest&&console.error(null!==(r=t.stack)&&void 0!==r?r:t.toString()));this.appendLine(`${c}${t}`),s>l&&(i.window.showMessage(t,"error"),o.isTest&&console.error(t))},this.trace=e=>{this.log("trace",e)},this.debug=e=>{this.log("debug",e)},this.info=e=>{this.log("info",e)},this.warn=e=>{this.log("warn",e)},this.error=e=>{e instanceof Error||(e=new Error(e)),this.log("error",e)},this.fatal=e=>{this.log("fatal",e)}}set level(e){this.levelStatus=e,this.levelNumber=a[e]}get level(){return this.levelStatus}dispose(){var e;null===(e=this.outputChannel_)||void 0===e||e.dispose()}get outputChannel(){return this.outputChannel_||(this.outputChannel_=i.window.createOutputChannel(this.channelName)),this.outputChannel_}time(e="default"){this.timeMarkers.set(e,(new Date).valueOf())}timeElapsed(e="default"){const t=this.timeMarkers.get(e);if(void 0!==t)return(new Date).valueOf()-t}timeLog(e="default"){const t=this.timeElapsed(e);void 0!==t&&this.appendLine(`${e}: ${t} ms`)}measureTime(e){const t=(new Date).valueOf(),n=e();return"then"in n?n.then((e=>[e,(new Date).valueOf()-t])):[n,(new Date).valueOf()-t]}measureTask(e,t="default",n="info"){const r=this.measureTime(e);if(!("then"in r)){const[e,i]=r;return this.log(n,`[measureTask] ${t}: ${i} ms`),e}return r.then((([e,r])=>(this.log(n,`${t}: ${r} ms`),e)))}asyncCatch(e){return async(...t)=>{try{return await e(...t)}catch(e){this.error(e)}}}prettyPrint(...e){this.info(h(...e)),i.window.showMessage(`[${u(new Date)}] ${h(...e)}`)}}function h(...e){return e.map((e=>s.default.inspect(e))).join(" ")}t.HelperLogger=c,t.helperLogger=new c("coc-helper"),t.prettyObject=h,t.prettyPrint=function(...e){t.helperLogger.prettyPrint(...e)}},8951:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModuleId=void 0,t.getModuleId=function(e){const t=`__coc_helper_module_max_id_${e}`;return t in global||(global[t]=0),global[t]+=1,global[t]}},9648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayHeight=t.displayWidth=t.byteLength=t.byteIndex=t.generateUri=void 0;const r=n(2906),i=n(3728),s=n(6950);async function o(e){return await r.workspace.nvim.call("strdisplaywidth",[e])}t.generateUri=function(e,t="file"){return"file"===t&&s.isWindows&&/^[A-Za-z]:/.test(e)&&(e=`/${e}`),`${t}://${e}`},t.byteIndex=function(e,t){const n=e.slice(0,t);return Buffer.byteLength(n)},t.byteLength=function(e){return Buffer.byteLength(e)},t.displayWidth=o,t.displayHeight=async function(e,t,n,r="n"){const s=await Promise.all(t.map((async(t,i)=>{let s=await o(t);return"i"===r&&n&&n[0]-1===i&&n[1]+1>=s&&(s+=1),Math.ceil(s/e)})));return(0,i.sum)(s)}},6238:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.versionName=t.version=void 0;const i=r(n(8351));t.version=i.default.version,t.versionName=t.version.replace(/[.-]/g,"_")},9593:(e,t,n)=>{"use strict";const r=n(4411),i=Symbol("max"),s=Symbol("length"),o=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),h=Symbol("lruList"),d=Symbol("cache"),f=Symbol("updateAgeOnGet"),p=()=>1,m=(e,t,n)=>{const r=e[d].get(t);if(r){const t=r.value;if(v(e,t)){if(w(e,r),!e[a])return}else n&&(e[f]&&(r.value.now=Date.now()),e[h].unshiftNode(r));return t.value}},v=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},g=e=>{if(e[s]>e[i])for(let t=e[h].tail;e[s]>e[i]&&null!==t;){const n=t.prev;w(e,t),t=n}},w=(e,t)=>{if(t){const n=t.value;e[u]&&e[u](n.key,n.value),e[s]-=n.length,e[d].delete(n.key),e[h].removeNode(t)}};class b{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const y=(e,t,n,r)=>{let i=n.value;v(e,i)&&(w(e,n),e[a]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||p;if(this[o]="function"!=typeof t?p:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,g(this)}get max(){return this[i]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,g(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[o]&&(this[o]=e,this[s]=0,this[h].forEach((e=>{e.length=this[o](e.value,e.key),this[s]+=e.length}))),g(this)}get lengthCalculator(){return this[o]}get length(){return this[s]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let n=this[h].tail;null!==n;){const r=n.prev;y(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[h].head;null!==n;){const r=n.next;y(this,e,n,t),n=r}}keys(){return this[h].toArray().map((e=>e.key))}values(){return this[h].toArray().map((e=>e.value))}reset(){this[u]&&this[h]&&this[h].length&&this[h].forEach((e=>this[u](e.key,e.value))),this[d]=new Map,this[h]=new r,this[s]=0}dump(){return this[h].map((e=>!v(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[h]}set(e,t,n){if((n=n||this[l])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,a=this[o](t,e);if(this[d].has(e)){if(a>this[i])return w(this,this[d].get(e)),!1;const o=this[d].get(e).value;return this[u]&&(this[c]||this[u](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[s]+=a-o.length,o.length=a,this.get(e),g(this),!0}const f=new b(e,t,a,r,n);return f.length>this[i]?(this[u]&&this[u](e,t),!1):(this[s]+=f.length,this[h].unshift(f),this[d].set(e,this[h].head),g(this),!0)}has(e){if(!this[d].has(e))return!1;const t=this[d].get(e).value;return!v(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){const e=this[h].tail;return e?(w(this,e),e.value):null}del(e){w(this,this[d].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[d].forEach(((e,t)=>m(this,t,!1)))}}},2257:(e,t,n)=>{const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(e,t){if(t=s(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new c(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new h(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new h(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=l(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=l(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||s&&o||a||u}}e.exports=i;const s=n(2893),{re:o,t:a}=n(5765),l=n(7539),u=n(4225),c=n(6376),h=n(6902)},6902:(e,t,n)=>{class r{constructor(e,t){if(t=s(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!p(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=i.get(t);if(n)return n;const r=this.options.loose,s=r?u[c.HYPHENRANGELOOSE]:u[c.HYPHENRANGE];e=e.replace(s,O(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(u[c.COMPARATORTRIM],h),a("comparator trim",e,u[c.COMPARATORTRIM]),e=(e=(e=e.replace(u[c.TILDETRIM],d)).replace(u[c.CARETTRIM],f)).split(/\s+/).join(" ");const l=r?u[c.COMPARATORLOOSE]:u[c.COMPARATOR],m=e.split(" ").map((e=>g(e,this.options))).join(" ").split(/\s+/).map((e=>I(e,this.options))).filter(this.options.loose?e=>!!e.match(l):()=>!0).map((e=>new o(e,this.options))),v=(m.length,new Map);for(const e of m){if(p(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const w=[...v.values()];return i.set(t,w),w}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some((n=>v(n,t)&&e.set.some((e=>v(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(C(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const i=new(n(9593))({max:1e3}),s=n(2893),o=n(2257),a=n(4225),l=n(6376),{re:u,t:c,comparatorTrimReplace:h,tildeTrimReplace:d,caretTrimReplace:f}=n(5765),p=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,v=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},g=(e,t)=>(a("comp",e,t),e=E(e,t),a("caret",e),e=b(e,t),a("tildes",e),e=_(e,t),a("xrange",e),e=N(e,t),a("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map((e=>y(e,t))).join(" "),y=(e,t)=>{const n=t.loose?u[c.TILDELOOSE]:u[c.TILDE];return e.replace(n,((t,n,r,i,s)=>{let o;return a("tilde",e,t,n,r,i,s),w(n)?o="":w(r)?o=`>=${n}.0.0 <${+n+1}.0.0-0`:w(i)?o=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:s?(a("replaceTilde pr",s),o=`>=${n}.${r}.${i}-${s} <${n}.${+r+1}.0-0`):o=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,a("tilde return",o),o}))},E=(e,t)=>e.trim().split(/\s+/).map((e=>$(e,t))).join(" "),$=(e,t)=>{a("caret",e,t);const n=t.loose?u[c.CARETLOOSE]:u[c.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,s,o)=>{let l;return a("caret",e,t,n,i,s,o),w(n)?l="":w(i)?l=`>=${n}.0.0${r} <${+n+1}.0.0-0`:w(s)?l="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:o?(a("replaceCaret pr",o),l="0"===n?"0"===i?`>=${n}.${i}.${s}-${o} <${n}.${i}.${+s+1}-0`:`>=${n}.${i}.${s}-${o} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${s}-${o} <${+n+1}.0.0-0`):(a("no pr"),l="0"===n?"0"===i?`>=${n}.${i}.${s}${r} <${n}.${i}.${+s+1}-0`:`>=${n}.${i}.${s}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${s} <${+n+1}.0.0-0`),a("caret return",l),l}))},_=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>x(e,t))).join(" ")),x=(e,t)=>{e=e.trim();const n=t.loose?u[c.XRANGELOOSE]:u[c.XRANGE];return e.replace(n,((n,r,i,s,o,l)=>{a("xRange",e,n,r,i,s,o,l);const u=w(i),c=u||w(s),h=c||w(o),d=h;return"="===r&&d&&(r=""),l=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(c&&(s=0),o=0,">"===r?(r=">=",c?(i=+i+1,s=0,o=0):(s=+s+1,o=0)):"<="===r&&(r="<",c?i=+i+1:s=+s+1),"<"===r&&(l="-0"),n=`${r+i}.${s}.${o}${l}`):c?n=`>=${i}.0.0${l} <${+i+1}.0.0-0`:h&&(n=`>=${i}.${s}.0${l} <${i}.${+s+1}.0-0`),a("xRange return",n),n}))},N=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[c.STAR],"")),I=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),O=e=>(t,n,r,i,s,o,a,l,u,c,h,d,f)=>`${n=w(r)?"":w(i)?`>=${r}.0.0${e?"-0":""}`:w(s)?`>=${r}.${i}.0${e?"-0":""}`:o?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=w(u)?"":w(c)?`<${+u+1}.0.0-0`:w(h)?`<${u}.${+c+1}.0-0`:d?`<=${u}.${c}.${h}-${d}`:e?`<${u}.${c}.${+h+1}-0`:`<=${l}`}`.trim(),C=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==o.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},6376:(e,t,n)=>{const r=n(4225),{MAX_LENGTH:i,MAX_SAFE_INTEGER:s}=n(3295),{re:o,t:a}=n(5765),l=n(2893),{compareIdentifiers:u}=n(6742);class c{constructor(e,t){if(t=l(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=c},3507:(e,t,n)=>{const r=n(3959);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},7539:(e,t,n)=>{const r=n(8718),i=n(1194),s=n(1312),o=n(5903),a=n(1544),l=n(2056);e.exports=(e,t,n,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,u);case"!=":return i(e,n,u);case">":return s(e,n,u);case">=":return o(e,n,u);case"<":return a(e,n,u);case"<=":return l(e,n,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},9038:(e,t,n)=>{const r=n(6376),i=n(3959),{re:s,t:o}=n(5765);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=s[o.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),s[o.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;s[o.COERCERTL].lastIndex=-1}else n=e.match(s[o.COERCE]);return null===n?null:i(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)}},8880:(e,t,n)=>{const r=n(6376);e.exports=(e,t,n)=>{const i=new r(e,n),s=new r(t,n);return i.compare(s)||i.compareBuild(s)}},7880:(e,t,n)=>{const r=n(6269);e.exports=(e,t)=>r(e,t,!0)},6269:(e,t,n)=>{const r=n(6376);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},2378:(e,t,n)=>{const r=n(3959),i=n(8718);e.exports=(e,t)=>{if(i(e,t))return null;{const n=r(e),i=r(t),s=n.prerelease.length||i.prerelease.length,o=s?"pre":"",a=s?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==i[e])return o+e;return a}}},8718:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>0===r(e,t,n)},1312:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(e,t,n)>0},5903:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(e,t,n)>=0},253:(e,t,n)=>{const r=n(6376);e.exports=(e,t,n,i)=>{"string"==typeof n&&(i=n,n=void 0);try{return new r(e,n).inc(t,i).version}catch(e){return null}}},1544:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(e,t,n)<0},2056:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(e,t,n)<=0},8679:(e,t,n)=>{const r=n(6376);e.exports=(e,t)=>new r(e,t).major},7789:(e,t,n)=>{const r=n(6376);e.exports=(e,t)=>new r(e,t).minor},1194:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>0!==r(e,t,n)},3959:(e,t,n)=>{const{MAX_LENGTH:r}=n(3295),{re:i,t:s}=n(5765),o=n(6376),a=n(2893);e.exports=(e,t)=>{if(t=a(t),e instanceof o)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?i[s.LOOSE]:i[s.FULL]).test(e))return null;try{return new o(e,t)}catch(e){return null}}},2358:(e,t,n)=>{const r=n(6376);e.exports=(e,t)=>new r(e,t).patch},7559:(e,t,n)=>{const r=n(3959);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},9795:(e,t,n)=>{const r=n(6269);e.exports=(e,t,n)=>r(t,e,n)},3657:(e,t,n)=>{const r=n(8880);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},5712:(e,t,n)=>{const r=n(6902);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},1100:(e,t,n)=>{const r=n(8880);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},6397:(e,t,n)=>{const r=n(3959);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},1249:(e,t,n)=>{const r=n(5765);e.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(3295).SEMVER_SPEC_VERSION,SemVer:n(6376),compareIdentifiers:n(6742).compareIdentifiers,rcompareIdentifiers:n(6742).rcompareIdentifiers,parse:n(3959),valid:n(6397),clean:n(3507),inc:n(253),diff:n(2378),major:n(8679),minor:n(7789),patch:n(2358),prerelease:n(7559),compare:n(6269),rcompare:n(9795),compareLoose:n(7880),compareBuild:n(8880),sort:n(1100),rsort:n(3657),gt:n(1312),lt:n(1544),eq:n(8718),neq:n(1194),gte:n(5903),lte:n(2056),cmp:n(7539),coerce:n(9038),Comparator:n(2257),Range:n(6902),satisfies:n(5712),toComparators:n(1042),maxSatisfying:n(5775),minSatisfying:n(1657),minVersion:n(5316),validRange:n(9042),outside:n(6826),gtr:n(7606),ltr:n(32),intersects:n(2937),simplifyRange:n(7908),subset:n(799)}},3295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},4225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},6742:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),i=t.test(n);return r&&i&&(e=+e,n=+n),e===n?0:r&&!i?-1:i&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},2893:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},5765:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r}=n(3295),i=n(4225),s=(t=e.exports={}).re=[],o=t.src=[],a=t.t={};let l=0;const u=(e,t,n)=>{const r=l++;i(r,t),a[e]=r,o[r]=t,s[r]=new RegExp(t,n?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${o[a.NUMERICIDENTIFIER]}|${o[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${o[a.NUMERICIDENTIFIERLOOSE]}|${o[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${o[a.PRERELEASEIDENTIFIER]}(?:\\.${o[a.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${o[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[a.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${o[a.BUILDIDENTIFIER]}(?:\\.${o[a.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${o[a.MAINVERSION]}${o[a.PRERELEASE]}?${o[a.BUILD]}?`),u("FULL",`^${o[a.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${o[a.MAINVERSIONLOOSE]}${o[a.PRERELEASELOOSE]}?${o[a.BUILD]}?`),u("LOOSE",`^${o[a.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${o[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${o[a.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:${o[a.PRERELEASE]})?${o[a.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:${o[a.PRERELEASELOOSE]})?${o[a.BUILD]}?)?)?`),u("XRANGE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),u("COERCERTL",o[a.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${o[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",u("TILDE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${o[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",u("CARET",`^${o[a.LONECARET]}${o[a.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${o[a.LONECARET]}${o[a.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${o[a.GTLT]}\\s*(${o[a.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]}|${o[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${o[a.XRANGEPLAIN]})\\s+-\\s+(${o[a.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${o[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[a.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0.0.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},7606:(e,t,n)=>{const r=n(6826);e.exports=(e,t,n)=>r(e,t,">",n)},2937:(e,t,n)=>{const r=n(6902);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t))},32:(e,t,n)=>{const r=n(6826);e.exports=(e,t,n)=>r(e,t,"<",n)},5775:(e,t,n)=>{const r=n(6376),i=n(6902);e.exports=(e,t,n)=>{let s=null,o=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(s&&-1!==o.compare(e)||(s=e,o=new r(s,n)))})),s}},1657:(e,t,n)=>{const r=n(6376),i=n(6902);e.exports=(e,t,n)=>{let s=null,o=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(s&&1!==o.compare(e)||(s=e,o=new r(s,n)))})),s}},5316:(e,t,n)=>{const r=n(6376),i=n(6902),s=n(1312);e.exports=(e,t)=>{e=new i(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let o=null;i.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":o&&!s(t,o)||(o=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!o||n&&!s(n,o)||(n=o)}return n&&e.test(n)?n:null}},6826:(e,t,n)=>{const r=n(6376),i=n(2257),{ANY:s}=i,o=n(6902),a=n(5712),l=n(1312),u=n(1544),c=n(2056),h=n(5903);e.exports=(e,t,n,d)=>{let f,p,m,v,g;switch(e=new r(e,d),t=new o(t,d),n){case">":f=l,p=c,m=u,v=">",g=">=";break;case"<":f=u,p=h,m=l,v="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,d))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let o=null,a=null;if(r.forEach((e=>{e.semver===s&&(e=new i(">=0.0.0")),o=o||e,a=a||e,f(e.semver,o.semver,d)?o=e:m(e.semver,a.semver,d)&&(a=e)})),o.operator===v||o.operator===g)return!1;if((!a.operator||a.operator===v)&&p(e,a.semver))return!1;if(a.operator===g&&m(e,a.semver))return!1}return!0}},7908:(e,t,n)=>{const r=n(5712),i=n(6269);e.exports=(e,t,n)=>{const s=[];let o=null,a=null;const l=e.sort(((e,t)=>i(e,t,n)));for(const e of l)r(e,t,n)?(a=e,o||(o=e)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const u=[];for(const[e,t]of s)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),h="string"==typeof t.raw?t.raw:String(t);return c.length<h.length?c:t}},799:(e,t,n)=>{const r=n(6902),i=n(2257),{ANY:s}=i,o=n(5712),a=n(6269),l=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===s){if(1===t.length&&t[0].semver===s)return!0;e=n.includePrerelease?[new i(">=0.0.0-0")]:[new i(">=0.0.0")]}if(1===t.length&&t[0].semver===s){if(n.includePrerelease)return!0;t=[new i(">=0.0.0")]}const r=new Set;let l,h,d,f,p,m,v;for(const t of e)">"===t.operator||">="===t.operator?l=u(l,t,n):"<"===t.operator||"<="===t.operator?h=c(h,t,n):r.add(t.semver);if(r.size>1)return null;if(l&&h){if(d=a(l.semver,h.semver,n),d>0)return null;if(0===d&&(">="!==l.operator||"<="!==h.operator))return null}for(const e of r){if(l&&!o(e,String(l),n))return null;if(h&&!o(e,String(h),n))return null;for(const r of t)if(!o(e,String(r),n))return!1;return!0}let g=!(!h||n.includePrerelease||!h.semver.prerelease.length)&&h.semver,w=!(!l||n.includePrerelease||!l.semver.prerelease.length)&&l.semver;g&&1===g.prerelease.length&&"<"===h.operator&&0===g.prerelease[0]&&(g=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,l)if(w&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===w.major&&e.semver.minor===w.minor&&e.semver.patch===w.patch&&(w=!1),">"===e.operator||">="===e.operator){if(f=u(l,e,n),f===e&&f!==l)return!1}else if(">="===l.operator&&!o(l.semver,String(e),n))return!1;if(h)if(g&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===g.major&&e.semver.minor===g.minor&&e.semver.patch===g.patch&&(g=!1),"<"===e.operator||"<="===e.operator){if(p=c(h,e,n),p===e&&p!==h)return!1}else if("<="===h.operator&&!o(h.semver,String(e),n))return!1;if(!e.operator&&(h||l)&&0!==d)return!1}return!(l&&m&&!h&&0!==d||h&&v&&!l&&0!==d||w||g)},u=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},c=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let i=!1;e:for(const r of e.set){for(const e of t.set){const t=l(r,e,n);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},1042:(e,t,n)=>{const r=n(6902);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},9042:(e,t,n)=>{const r=n(6902);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},4148:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const i=n(2906),s=r(n(7147)),o=r(n(1017)),a=n(7399),l=n(9276),u=n(4912),c=n(9170),h=n(5845),d=n(4649);t.activate=async function(e){const t=i.workspace.getConfiguration("kotlin"),n=t.get("languageServer.enabled");await(0,c.fsExists)(e.storagePath)||await s.default.promises.mkdir(e.storagePath);const r=o.default.join(e.storagePath,"config.json"),f=await a.InternalConfigManager.loadingConfigFrom(r);if(!f.getConfig().initialized){const e="The Kotlin extension will automatically download a language server to provide code completion, linting and more. If you prefer to install these yourself, you can provide custom paths or disable them in your settings.";if(!await i.window.showInformationMessage(e,"Ok, continue"))return;await f.updateConfig({initialized:!0})}const p=[];await(0,l.verifyJavaIsAvailable)()&&(n?p.push(async function(e,t){const n=new d.StatusBarEntry(e,"$(sync~spin)");n.show(),await t(n),n.dispose()}(e,(async n=>{await(0,u.activateLanguageServer)(e,n,t)}))):h.logger.info("Skipping language server activation since 'kotlin.languageServer.enabled' is false"),await Promise.all(p).catch(h.logger.error))},t.deactivate=function(){}},7399:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalConfigManager=void 0;const i=r(n(7147));class s{constructor(e,t){this.filePath=e,this.config=t}static async loadingConfigFrom(e){return new s(e,await async function(e){try{return JSON.parse((await i.default.promises.readFile(e)).toString("utf8"))}catch(e){return{initialized:!1}}}(e))}getConfig(){return this.config}async updateConfig(e){Object.assign(this.config,e),await async function(e,t){await i.default.promises.writeFile(e,JSON.stringify(t),{encoding:"utf8"})}(this.filePath,this.config)}}t.InternalConfigManager=s},8337:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JarClassContentProvider=void 0;const r=n(2906),i=n(6019);t.JarClassContentProvider=class{constructor(e){this.client=e}setClient(e){this.client=e}async provideTextDocumentContent(e){return await this.client.sendRequest(i.JarClassContentsRequest.type,{uri:e.toString()})||(r.window.showMessage(`Could not fetch class file contents of '${e.toString()}' from the language server. Make sure that it conforms to the format 'kls:file:///path/to/myJar.jar!/path/to/myClass.class'!`,"error"),"")}}},9276:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.verifyJavaIsAvailable=void 0;const a=s(n(2906)),l=o(n(7147)),u=o(n(1017)),c=n(5839),h=n(9170),d=n(5845);async function f(e,t){const n=e.split(u.default.delimiter);for(let e=0;e<n.length;e++){const r=u.default.join(n[e],"bin",t);if(await(0,h.fsExists)(r))return r}return null}t.verifyJavaIsAvailable=async function(){let e;try{e=await async function(e){const t=(0,c.correctBinname)("java"),n=a.workspace.getConfiguration("java").get("home");if(null!=n){d.logger.debug(`Looking for Java in java.home (settings): ${n}`);const e=await f(n,t);if(null!=e)return e}const r=process.env.JAVA_HOME;if(r){d.logger.debug(`Looking for Java in JAVA_HOME (environment variable): ${r}`);const e=await f(r,t);if(null!=e)return e}if(process.env.PATH){d.logger.debug("Looking for Java in PATH");const e=process.env.PATH.split(u.default.delimiter);for(let n=0;n<e.length;n++){const r=u.default.join(e[n],t);if(l.default.existsSync(r))return r}}return d.logger.debug("Could not find Java, will try using binary name directly"),t}()}catch(e){return console.error(e),await a.window.showErrorMessage(`Could not locate Java: ${e.message}`),!1}return null==e?(await a.window.showErrorMessage("Couldn't locate java in $JAVA_HOME or $PATH"),!1):!!e}},4912:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.spawnLanguageServerProcessAndConnectViaTcp=t.activateLanguageServer=void 0;const i=r(n(2081)),s=n(2906),o=r(n(1808)),a=r(n(1017)),l=n(8337),u=n(4200),c=n(5845),h=n(5839);function d(e){return new Promise(((t,n)=>{c.logger.info("Creating server.");const r=o.default.createServer((e=>{c.logger.info("Closing server since client has connected."),r.close(),t({reader:e,writer:e})}));r.listen(e.tcpPort,(()=>{const t=r.address().port.toString(),n=i.default.spawn(e.startScriptPath,["--tcpClientPort",t]);c.logger.info(`Creating client at ${e.startScriptPath} via TCP port ${t}`);const s=t=>e.outputChannel.append(`${t}`);n.stdout.on("data",s),n.stderr.on("data",s),n.on("exit",((t,n)=>e.outputChannel.appendLine(`The language server exited, code: ${t}, signal: ${n}`)))})),r.on("error",(e=>n(e)))}))}t.activateLanguageServer=async function(e,t,n){c.logger.info("Activating Kotlin Language Server..."),t.update("Activating Kotlin Language Server...");const r=a.default.join(e.storagePath,"langServerInstall"),o=n.get("languageServer.path");if(!o){const e=new u.ServerDownloader("Kotlin Language Server","kotlin-language-server","server.zip",r);try{await e.downloadServerIfNeeded(t)}catch(e){return void await s.window.showWarningMessage(`Could not update/download Kotlin Language Server: ${e.toString()}`)}}const f=s.window.createOutputChannel("kotlin-language-server");e.subscriptions.push(f);const p=n.get("languageServer.transport");let m;"tcp"===p?(m=n.get("languageServer.port"),c.logger.info(`Connecting via TCP, port: ${m}`)):"stdio"===p?c.logger.info("Connecting via Stdio."):c.logger.info(`Unknown transport layer: ${p}`),t.dispose();const v=o||a.default.resolve(r,"server","bin",(0,h.correctScriptName)("kotlin-language-server")),g=function(e){var t,n;const r={documentSelector:[{language:"kotlin",scheme:"file"},{language:"kotlin",scheme:"kls"}],synchronize:{configurationSection:"kotlin",fileEvents:[s.workspace.createFileSystemWatcher("**/*.kt"),s.workspace.createFileSystemWatcher("**/*.kts"),s.workspace.createFileSystemWatcher("**/*.java"),s.workspace.createFileSystemWatcher("**/pom.xml"),s.workspace.createFileSystemWatcher("**/build.gradle"),s.workspace.createFileSystemWatcher("**/settings.gradle")]},progressOnInitialization:!0,outputChannel:e.outputChannel,revealOutputChannelOn:s.RevealOutputChannelOn.Never};let o;if((0,h.isOSUnixoid)()&&i.default.exec(`chmod +x ${e.startScriptPath}`),e.tcpPort)o=()=>d(e);else{const r=null===(n=null===(t=s.workspace.workspaceFolders)||void 0===t?void 0:t[0])||void 0===n?void 0:n.uri;o={command:e.startScriptPath,args:[],options:{cwd:r?s.Uri.parse(r).fsPath:void 0,env:e.env}},c.logger.info(`Creating client at ${e.startScriptPath}`)}return new s.LanguageClient("kotlin","Kotlin Language Client",o,r)}({outputChannel:f,startScriptPath:v,tcpPort:m,env:void 0});let w=g.start();e.subscriptions.push(w);const b=new l.JarClassContentProvider(g);e.subscriptions.push(s.workspace.registerTextDocumentContentProvider("kls",b),s.workspace.registerTextDocumentContentProvider("kls:file",b)),e.subscriptions.push(s.commands.registerCommand("kotlin.languageServer.restart",c.logger.asyncCatch((async()=>{await g.stop(),w.dispose(),f.appendLine(""),f.appendLine(" === Language Server Restart ==="),f.appendLine(""),w=g.start(),e.subscriptions.push(w)})))),await g.onReady()},t.spawnLanguageServerProcessAndConnectViaTcp=d},6019:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JarClassContentsRequest=void 0;const r=n(2906);(t.JarClassContentsRequest||(t.JarClassContentsRequest={})).type=new r.RequestType("kotlin/jarClassContents")},4200:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerDownloader=void 0;const i=n(2906),s=r(n(7147)),o=r(n(1017)),a=r(n(1249)),l=n(9170),u=n(5845);t.ServerDownloader=class{constructor(e,t,n,r){this.displayName=e,this.githubProjectName=t,this.assetName=n,this.installDir=r,this.displayName=e,this.githubProjectName=t,this.installDir=r,this.assetName=n}async latestReleaseInfo(){return await(0,i.fetch)(`https://api.github.com/repos/fwcd/${this.githubProjectName}/releases/latest`,{headers:{"User-Agent":"coc-kotlin"}})}serverInfoFile(){return o.default.join(this.installDir,"SERVER-INFO")}async installedServerInfo(){try{const e=JSON.parse((await s.default.promises.readFile(this.serverInfoFile())).toString("utf8"));return a.default.valid(e.version)?e:void 0}catch(e){u.logger.warn(e.toString())}}async updateInstalledServerInfo(e){await s.default.promises.writeFile(this.serverInfoFile(),JSON.stringify(e),{encoding:"utf8"})}async downloadServer(e,t,n){await(0,l.fsExists)(this.installDir)||await s.default.promises.mkdir(this.installDir,{recursive:!0}),n.update(`Downloading ${this.displayName} ${t}...`),await(0,i.download)(e,{dest:this.installDir,extract:"unzip",onProgress:e=>{n.update(`Downloading ${this.displayName} ${t} :: ${e}%`)}}),n.update(`Initializing ${this.displayName}...`)}async downloadServerIfNeeded(e){const t=await this.installedServerInfo(),n=t||{version:"0.0.0",lastUpdate:Number.MIN_SAFE_INTEGER};if((Date.now()-n.lastUpdate)/1e3>480){let r;u.logger.info(`Querying GitHub API for new ${this.displayName} version...`);try{r=await this.latestReleaseInfo()}catch(e){const n=`Could not fetch from GitHub releases API: ${e.toString()}.`;if(void 0===t)throw new Error(n);return void u.logger.warn(n)}const i=r.tag_name,s=n.version;let o=s;if(a.default.gt(i,s)){const t=r.assets.find((e=>e.name===this.assetName));if(!t)throw new Error(`Latest GitHub release for ${this.githubProjectName} does not contain the asset '${this.assetName}'!`);{const n=t.browser_download_url;await this.downloadServer(n,i,e)}o=i}await this.updateInstalledServerInfo({version:o,lastUpdate:Date.now()})}}}},9170:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fsExists=void 0;const i=r(n(7147));t.fsExists=async function(e){try{return await i.default.promises.access(e),!0}catch(e){return!1}}},5845:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const r=n(8303);t.logger=new r.HelperLogger("coc-kotlin")},5839:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.correctScriptName=t.correctBinname=t.isOSUnixoid=t.isOSWindows=void 0,t.isOSWindows=function(){return"win32"===process.platform},t.isOSUnixoid=function(){const e=process.platform;return"linux"===e||"darwin"===e||"freebsd"===e||"openbsd"===e},t.correctBinname=function(e){return e+("win32"===process.platform?".exe":"")},t.correctScriptName=function(e){return e+("win32"===process.platform?".bat":"")}},4649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBarEntry=void 0;const r=n(2906);t.StatusBarEntry=class{constructor(e,t){this.disposed=!1,this.prefix=t,this.barItem=r.window.createStatusBarItem(),e.subscriptions.push(this.barItem)}show(){this.barItem.show()}update(e){this.barItem.text=`${this.prefix} ${e}`}dispose(){this.disposed||(this.disposed=!0,this.barItem.dispose())}}},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,n)=>{"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function i(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function o(e,t,n,r){if(!(this instanceof o))return new o(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=o,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,s=this.head;null!==s&&i<e;i++)s=s.next;for(;null!==s&&i<t;i++,s=s.next)n.push(s.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,s=this.tail;null!==s&&i>t;i--)s=s.prev;for(;null!==s&&i>e;i--,s=s.prev)n.push(s.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var s,a,l,u,c=[];for(r=0;i&&r<t;r++)c.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),r=0;r<n.length;r++)s=this,a=i,l=n[r],u=void 0,null===(u=a===s.head?new o(l,null,a,s):new o(l,a,a.next,s)).next&&(s.tail=u),null===u.prev&&(s.head=u),s.length++,i=u;return c},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(9602)(r)}catch(e){}},2906:e=>{"use strict";e.exports=require("coc.nvim")},2081:e=>{"use strict";e.exports=require("child_process")},7147:e=>{"use strict";e.exports=require("fs")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},3837:e=>{"use strict";e.exports=require("util")},8351:e=>{"use strict";e.exports=JSON.parse('{"name":"coc-helper","version":"0.13.0","description":"Helpers for coc.nvim","module":"lib/esm/index.js","main":"lib/cjs/index.js","homepage":"https://github.com/weirongxu/coc-helper","repository":"git@github.com:weirongxu/coc-helper.git","author":"Weirong Xu <weirongxu.raidou@gmail.com>","license":"MIT","files":["lib","tests","jest.config.js","JestHelper.js","JestHelper.d.ts"],"scripts":{"clean":"rimraf lib","copy:pkg":"cpy --rename=_package.json package.json src/","build:esm":"tsc -p ./tsconfig.prod.json --module es2020 --outDir lib/esm","build:cjs":"tsc -p ./tsconfig.prod.json --module commonjs --outDir lib/cjs","build":"npm-run-all clean copy:pkg build:esm build:cjs","lint":"eslint src --ext ts","setup:test-env":"node ./tests/setup.js","prepare":"run-s clean setup:test-env build","unittest":"jest --runInBand --detectOpenHandles --forceExit","test":"npm-run-all copy:pkg lint unittest"},"engines":{"coc":"^0.0.77"},"activationEvents":["*"],"prettier":{"singleQuote":true,"printWidth":80,"semi":true,"trailingComma":"all"},"peerDependencies":{"coc.nvim":"*"},"devDependencies":{"@chemzqm/neovim":"^5.4.0","@raidou/eslint-config-base":"^1.5.0","@types/eslint":"^8.2.1","@types/jest":"^27.0.1","@types/node":"^17.0.6","@types/rimraf":"^3.0.2","@types/uuid":"^8.3.1","coc.nvim":"0.0.81-next.0","cpy-cli":"^3.1.1","eslint":"^8.6.0","jest":"^27.2.0","log4js":"^6.3.0","npm-run-all":"^4.1.5","prettier":"^2.5.1","ts-jest":"^27.0.5","type-fest":"^2.3.2","typescript":"^4.4.3"},"dependencies":{"rimraf":"^3.0.2","uuid":"^8.3.2"}}')}},t={},n=function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}(4148),r=exports;for(var i in n)r[i]=n[i];n.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();